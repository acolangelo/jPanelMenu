!function(n){n.jPanelMenu=function(e){("undefined"==typeof e||null==e)&&(e={});var t={options:n.extend({menu:"#menu",openTrigger:".menu-trigger",closeTrigger:!1,excludedPanelContent:"style, script",keepEventHandlers:!1,direction:"left",openPosition:"250px",animated:!0,closeOnContentClick:!0,keyboardShortcuts:[{code:27,open:!1,close:!0},{code:37,open:!1,close:!0},{code:39,open:!0,close:!0},{code:77,open:!0,close:!0}],duration:150,openDuration:e.duration||150,closeDuration:e.duration||150,easing:"ease-in-out",openEasing:e.easing||"ease-in-out",closeEasing:e.easing||"ease-in-out",before:function(){},beforeOpen:function(){},beforeClose:function(){},after:function(){},afterOpen:function(){},afterClose:function(){},beforeOn:function(){},afterOn:function(){},beforeOff:function(){},afterOff:function(){}},e),settings:{transitionsSupported:"WebkitTransition"in document.body.style||"MozTransition"in document.body.style||"msTransition"in document.body.style||"OTransition"in document.body.style||"Transition"in document.body.style,shiftFixedChildren:!1,panelPosition:"relative",positionUnits:"px"},menu:"#jPanelMenu-menu",panel:".jPanelMenu-panel",fixedChildren:[],timeouts:{},clearTimeouts:function(){clearTimeout(t.timeouts.open),clearTimeout(t.timeouts.afterOpen),clearTimeout(t.timeouts.afterClose)},setPositionUnits:function(){var n=!1,e=["%","px","em"];for(unitID in e){var i=e[unitID];t.options.openPosition.toString().substr(-i.length)==i&&(n=!0,t.settings.positionUnits=i)}n||(t.options.openPosition=parseInt(t.options.openPosition)+t.settings.positionUnits)},checkFixedChildren:function(){t.disableTransitions();var e={position:n(t.panel).css("position")};if(e[t.options.direction]="auto"==n(t.panel).css(t.options.direction)?0:n(t.panel).css(t.options.direction),n(t.panel).find("> *").each(function(){"fixed"==n(this).css("position")&&"auto"==n(this).css(t.options.direction)&&t.fixedChildren.push(this)}),t.fixedChildren.length>0){var i={position:"relative"};i[t.options.direction]="1px",t.setPanelStyle(i),0==parseInt(n(t.fixedChildren[0]).offset().left)&&(t.settings.shiftFixedChildren=!0)}t.setPanelStyle(e)},setjPanelMenuStyles:function(){var e="#fff",i=n("html").css("background-color"),o=n("body").css("background-color");e="transparent"!=o&&"rgba(0, 0, 0, 0)"!=o?o:"transparent"!=i&&"rgba(0, 0, 0, 0)"!=i?i:"#fff",0==n("#jPanelMenu-style-master").length&&n("body").append('<style id="jPanelMenu-style-master">body{width:100%}.jPanelMenu,body{overflow-x:hidden}#jPanelMenu-menu{display:block;position:fixed;top:0;'+t.options.direction+":0;height:100%;z-index:-1;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch}.jPanelMenu-panel{position:static;"+t.options.direction+":0;top:0;z-index:2;width:100%;min-height:100%;background:"+e+"}</style>")},setMenuState:function(e){var t=e?"open":"closed";n("body").attr("data-menu-position",t)},getMenuState:function(){return n("body").attr("data-menu-position")},menuIsOpen:function(){return"open"==t.getMenuState()?!0:!1},setMenuStyle:function(e){n(t.menu).css(e)},setPanelStyle:function(e){n(t.panel).css(e)},showMenu:function(){t.setMenuStyle({display:"block"}),t.setMenuStyle({"z-index":"1"})},hideMenu:function(){t.setMenuStyle({"z-index":"-1"}),t.setMenuStyle({display:"none"})},enableTransitions:function(e,i){var o=e/1e3,s=t.getCSSEasingFunction(i);t.disableTransitions(),n("body").append('<style id="jPanelMenu-style-transitions">.jPanelMenu-panel{-webkit-transition: all '+o+"s "+s+"; -moz-transition: all "+o+"s "+s+"; -o-transition: all "+o+"s "+s+"; transition: all "+o+"s "+s+";}</style>")},disableTransitions:function(){n("#jPanelMenu-style-transitions").remove()},enableFixedTransitions:function(e,i,o,s){var a=o/1e3,r=t.getCSSEasingFunction(s);t.disableFixedTransitions(i),n("body").append('<style id="jPanelMenu-style-fixed-'+i+'">'+e+"{-webkit-transition: all "+a+"s "+r+"; -moz-transition: all "+a+"s "+r+"; -o-transition: all "+a+"s "+r+"; transition: all "+a+"s "+r+";}</style>")},disableFixedTransitions:function(e){n("#jPanelMenu-style-fixed-"+e).remove()},getCSSEasingFunction:function(n){switch(n){case"linear":return n;case"ease":return n;case"ease-in":return n;case"ease-out":return n;case"ease-in-out":return n;default:return"ease-in-out"}},getJSEasingFunction:function(n){switch(n){case"linear":return n;default:return"swing"}},openMenu:function(e){("undefined"==typeof e||null==e)&&(e=t.options.animated),t.clearTimeouts(),t.options.before(),t.options.beforeOpen(),t.setMenuState(!0),t.setPanelStyle({position:"relative"}),t.showMenu();var i={none:e?!1:!0,transitions:e&&t.settings.transitionsSupported?!0:!1};if(i.transitions||i.none){i.none&&t.disableTransitions(),i.transitions&&t.enableTransitions(t.options.openDuration,t.options.openEasing);var o={};o[t.options.direction]=t.options.openPosition,t.setPanelStyle(o),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e=n(this).prop("tagName").toLowerCase()+" "+n(this).attr("class"),o=e.replace(" ","."),e=e.replace(" ","-");i.none&&t.disableFixedTransitions(e),i.transitions&&t.enableFixedTransitions(o,e,t.options.openDuration,t.options.openEasing);var s={};s[t.options.direction]=t.options.openPosition,n(this).css(s)}),t.timeouts.afterOpen=setTimeout(function(){t.disableTransitions(),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e=n(this).prop("tagName").toLowerCase()+" "+n(this).attr("class"),e=e.replace(" ","-");t.disableFixedTransitions(e)}),t.options.after(),t.options.afterOpen(),t.initiateCloseClickListeners(),t.initiateContentClickListeners()},t.options.openDuration)}else{var s=t.getJSEasingFunction(t.options.openEasing),a={};a[t.options.direction]=t.options.openPosition,n(t.panel).stop().animate(a,t.options.openDuration,s,function(){t.options.after(),t.options.afterOpen(),t.initiateCloseClickListeners(),t.initiateContentClickListeners()}),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e={};e[t.options.direction]=t.options.openPosition,n(this).stop().animate(e,t.options.openDuration,s)})}},closeMenu:function(e){("undefined"==typeof e||null==e)&&(e=t.options.animated),t.clearTimeouts(),t.options.before(),t.options.beforeClose(),t.setMenuState(!1);var i={none:e?!1:!0,transitions:e&&t.settings.transitionsSupported?!0:!1};if(i.transitions||i.none){i.none&&t.disableTransitions(),i.transitions&&t.enableTransitions(t.options.closeDuration,t.options.closeEasing);var o={};o[t.options.direction]=0+t.settings.positionUnits,t.setPanelStyle(o),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e=n(this).prop("tagName").toLowerCase()+" "+n(this).attr("class"),o=e.replace(" ","."),e=e.replace(" ","-");i.none&&t.disableFixedTransitions(e),i.transitions&&t.enableFixedTransitions(o,e,t.options.closeDuration,t.options.closeEasing);var s={};s[t.options.direction]=0+t.settings.positionUnits,n(this).css(s)}),t.timeouts.afterClose=setTimeout(function(){t.setPanelStyle({position:t.settings.panelPosition}),t.disableTransitions(),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e=n(this).prop("tagName").toLowerCase()+" "+n(this).attr("class"),e=e.replace(" ","-");t.disableFixedTransitions(e)}),t.hideMenu(),t.options.after(),t.options.afterClose(),t.destroyContentClickListeners()},t.options.closeDuration)}else{var s=t.getJSEasingFunction(t.options.closeEasing),a={};a[t.options.direction]=0+t.settings.positionUnits,n(t.panel).stop().animate(a,t.options.closeDuration,s,function(){t.setPanelStyle({position:t.settings.panelPosition}),t.hideMenu(),t.options.after(),t.options.afterClose(),t.destroyContentClickListeners()}),t.settings.shiftFixedChildren&&n(t.fixedChildren).each(function(){var e={};e[t.options.direction]=0+t.settings.positionUnits,n(this).stop().animate(e,t.options.closeDuration,s)})}},triggerMenu:function(n){t.menuIsOpen()?t.closeMenu(n):t.openMenu(n)},initiateClickListeners:function(){n(document).on("click",t.options.openTrigger,function(){return t.triggerMenu(t.options.animated),!1})},destroyClickListeners:function(){n(document).off("click",t.options.openTrigger,null)},initiateCloseClickListeners:function(){return t.options.closeTrigger?(n(document).on("click",t.options.closeTrigger,function(){t.menuIsOpen()&&t.closeMenu(t.options.animated)}),n(document).on("touchend",t.options.closeTrigger,function(){t.menuIsOpen()&&t.closeMenu(t.options.animated)}),void 0):!1},destroyCloseClickListeners:function(){return t.options.closeTrigger?(n(document).off("click",t.options.closeTrigger,null),n(document).off("touchend",t.options.closeTrigger,null),void 0):!1},initiateContentClickListeners:function(){return t.options.closeOnContentClick?(n(document).on("click",t.panel,function(){t.menuIsOpen()&&t.closeMenu(t.options.animated)}),n(document).on("touchend",t.panel,function(){t.menuIsOpen()&&t.closeMenu(t.options.animated)}),void 0):!1},destroyContentClickListeners:function(){return t.options.closeOnContentClick?(n(document).off("click",t.panel,null),n(document).off("touchend",t.panel,null),void 0):!1},initiateKeyboardListeners:function(){var e=["input","textarea"];n(document).on("keydown",function(i){var o=n(i.target),s=!1;if(n.each(e,function(){o.is(this.toString())&&(s=!0)}),s)return!0;for(mapping in t.options.keyboardShortcuts)if(i.which==t.options.keyboardShortcuts[mapping].code){var a=t.options.keyboardShortcuts[mapping];return a.open&&a.close?t.triggerMenu(t.options.animated):!a.open||a.close||t.menuIsOpen()?!a.open&&a.close&&t.menuIsOpen()&&t.closeMenu(t.options.animated):t.openMenu(t.options.animated),!1}})},destroyKeyboardListeners:function(){n(document).off("keydown",null)},setupMarkup:function(){n("html").addClass("jPanelMenu"),n("body > *").not(t.menu+", "+t.options.excludedPanelContent).wrapAll('<div class="'+t.panel.replace(".","")+'"/>'),n(t.options.menu).clone(t.options.keepEventHandlers).attr("id",t.menu.replace("#","")).insertAfter("body > "+t.panel)},resetMarkup:function(){n("html").removeClass("jPanelMenu"),n("body > "+t.panel+" > *").unwrap(),n(t.menu).remove()},init:function(){t.options.beforeOn(),t.initiateClickListeners(),"[object Array]"===Object.prototype.toString.call(t.options.keyboardShortcuts)&&t.initiateKeyboardListeners(),t.setjPanelMenuStyles(),t.setMenuState(!1),t.setupMarkup(),t.setMenuStyle({width:t.options.openPosition}),t.checkFixedChildren(),t.setPositionUnits(),t.closeMenu(!1),t.options.afterOn()},destroy:function(){t.options.beforeOff(),t.closeMenu(),t.destroyClickListeners(),"[object Array]"===Object.prototype.toString.call(t.options.keyboardShortcuts)&&t.destroyKeyboardListeners(),t.resetMarkup();var e={};e[t.options.direction]="auto",n(t.fixedChildren).each(function(){n(this).css(e)}),t.fixedChildren=[],t.options.afterOff()}};return{on:t.init,off:t.destroy,trigger:t.triggerMenu,open:t.openMenu,close:t.closeMenu,isOpen:t.menuIsOpen,menu:t.menu,getMenu:function(){return n(t.menu)},panel:t.panel,getPanel:function(){return n(t.panel)}}}}(jQuery);